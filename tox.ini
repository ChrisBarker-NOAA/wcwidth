[tox]
envlist = compile, update, docs, py26, py27, py34, py35, py36

[testenv]
deps = pytest
commands = {posargs:py.test}

[testenv:compile]
commands = python -m compileall {toxinidir}/wcwidth

[testenv:check]
# static analysis
deps = -rrequirements-develop.txt
usedevelop = true
commands = prospector {posargs:--no-autodetect --die-on-tool-error}

[testenv:docs]
deps = sphinx
commands = sphinx-build docs/ build/sphinx

[testenv:update]
usedevelop = true
basepython = python3.8
commands = python {toxinidir}/bin/update-tables.py
           python -mcompileall {toxinidir}/wcwidth/table_zero.py \
                               {toxinidir}/wcwidth/table_wide.py

[testenv:develop]
deps = -rrequirements-develop.txt
commands = {posargs}

[testenv:semver]
usedevelop = false
basepython = python3.6
commands = python {toxinidir}/bin/bump-version.py {posargs}
